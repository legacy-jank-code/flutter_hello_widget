# Flutter Hello Widget 测试配置

# 测试运行配置
test_runner:
  # 并发测试数量
  concurrency: 4
  
  # 重试次数
  retries: 2
  
  # 超时时间
  timeout: 30s
  
  # 覆盖率配置
  coverage:
    enabled: true
    exclude:
      - 'lib/**/*.g.dart'
      - 'lib/**/*.freezed.dart'
      - 'lib/generated/**'
      - 'test/**'
      - 'example/**'
    include:
      - 'lib/src/**'
    threshold:
      lines: 80
      functions: 80
      branches: 70

# 测试分组配置
test_groups:
  # 单元测试
  unit_tests:
    pattern: 'test/**/*_test.dart'
    exclude:
      - 'test/integration/**'
    timeout: 10s
    
  # 集成测试
  integration_tests:
    pattern: 'test/integration/**'
    timeout: 60s
    
  # UI组件测试
  widget_tests:
    pattern: 'test/presentation/**'
    timeout: 15s
    
  # 核心工具测试
  core_tests:
    pattern: 'test/core/**'
    timeout: 5s

# 测试环境配置
test_environment:
  # 模拟设备尺寸
  screen_sizes:
    - name: mobile_small
      size: [375, 667]
    - name: mobile_large
      size: [414, 896]
    - name: tablet
      size: [768, 1024]
    - name: desktop
      size: [1920, 1080]
  
  # 文本缩放因子
  text_scale_factors:
    - 0.8
    - 1.0
    - 1.2
    - 1.5
  
  # 平台配置
  platforms:
    - ios
    - android
    - web
    - macos
    - windows
    - linux

# 测试数据配置
test_data:
  # 测试字符串
  test_strings:
    short: '测试'
    medium: '这是一个中等长度的测试字符串'
    long: '这是一个非常长的测试字符串，用于测试文本溢出和边界条件处理'
    empty: ''
    whitespace: '   '
    special: '!@#\$%^&*()_+-=[]{}|;:,.<>?'
  
  # 测试尺寸
  test_dimensions:
    small: 50.0
    medium: 100.0
    large: 200.0
    maximum: 1000.0
    
  # 测试超时时间
  test_timeouts:
    short: 100ms
    medium: 500ms
    long: 2000ms
    very_long: 5000ms

# 测试工具配置
test_tools:
  # 日志级别
  logging:
    level: info
    include_test_name: true
    include_timestamp: true
    
  # 性能监控
  performance:
    enabled: true
    track_memory: true
    track_cpu: true
    track_fps: true
    
  # 截图配置
  screenshots:
    enabled: true
    format: png
    quality: 90
    on_failure: true
    on_success: false
    
  # 视频录制
  video_recording:
    enabled: false
    format: mp4
    quality: high
    fps: 30

# CI/CD 配置
ci_cd:
  # GitHub Actions 配置
  github_actions:
    enabled: true
    workflows:
      - name: test
        triggers: [push, pull_request]
        matrix:
          flutter_version: ['3.16.0', 'stable']
          platform: [ubuntu-latest, macos-latest, windows-latest]
    
  # GitLab CI 配置
  gitlab_ci:
    enabled: false
    stages:
      - test
      - coverage
      - report
    
  # 代码质量检查
  code_quality:
    enabled: true
    tools:
      - dart analyze
      - dart format --set-exit-if-changed
      - flutter test
    
  # 覆盖率报告
  coverage_report:
    enabled: true
    services:
      - codecov
      - coveralls
    thresholds:
      project: 80
      patch: 90

# 测试最佳实践
best_practices:
  # 测试命名规范
  naming_conventions:
    test_file: 'test/**/*.dart'
    test_function: 'should_{expected_behavior}_when_{condition}'
    group_name: '{component_name} {feature_name}'
    
  # 测试结构
  test_structure:
    - arrange
    - act
    - assert
    
  # 测试覆盖率要求
  coverage_requirements:
    minimum: 80
    target: 90
    exclude_generated: true
    
  # 测试执行时间要求
  performance_requirements:
    unit_test_max: 1s
    widget_test_max: 5s
    integration_test_max: 30s